---
import type { Period, SortMetric } from '../types'

interface Props {
	Cats?: string
	Period: Period
	SortBy?: SortMetric
	Page: number
	NextPage: number
}

const { Cats: cats, Period: period, SortBy: sort_by, Page: page, NextPage: next_page } = Astro.props
const is_only_page = 
	page === 1
	&& next_page === -1
const href_without_page = `/top${period !== 'all' ? `?period=${period}` : ''}${cats !== undefined ? period !== 'all' ? `&cats=${cats}` : `?cats=${cats}` : ''}${sort_by !== 'rating' ? period !== 'all' || cats !== undefined ? 'sort_by=newest' : '?sort_by=newest' : ''}`
---

<nav class="pagination" style=`display: ${is_only_page ? 'none' : 'block'}`>
	Page:
	{page > 1 ? <a href={href_without_page + '&page=1'}>1</a> : null}

	{ page > 3 ? <span>...</span> : null}

	{
		page > 2 ? (
			<span>
				<a href={href_without_page + `&page=${page - 1}`}>{page - 1}</a>
			</span>
		) : null
	}

	<span>
		{page}
	</span>

	{
		next_page > 0 ? (
			<a href={href_without_page + ((cats !== undefined || period !== 'all' || sort_by !== 'rating') ? `&page=${next_page}` : `?page=${next_page}`)}>{next_page}</a>
		) : null
	}
</nav>
